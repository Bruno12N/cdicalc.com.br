function formatarMoeda(c){let a=c.value;a=a.replace(/\D/g,""),a=(a/100).toFixed(2)+"",a=a.replace(".",","),a=a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),c.value=a}function formatarNumero(b){return parseFloat(b.replace(/\./g,"").replace(",","."))}let chart;function calcular(){const a=formatarNumero(document.getElementById("valorInicial").value),b=parseInt(document.getElementById("tempo").value),c=document.getElementById("periodoTipo").value,d=parseFloat(document.getElementById("porcentagemCDI").value),e=formatarNumero(document.getElementById("aporteMensal").value);if(isNaN(a)||isNaN(b)||isNaN(d)||isNaN(e))return void alert("Por favor, insira valores v\xE1lidos.");const f=Math.pow(1+10.4/100,1/12)-1;let g=a,h=a;const i=[],j=[],k="anos"===c?12*b:b;for(let b=1;b<=k;b++){g+=e,h+=e,g*=1+f*(d/100);let c=6>=b?22.5/100:12>=b?20/100:24>=b?17.5/100:15/100;const k=g-a-e*b,l=g-k*c;i.push(l.toFixed(2)),j.push(h.toFixed(2))}document.getElementById("resultado").innerHTML=`Valor final do investimento: R$${parseFloat(i[i.length-1]).toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>Valor final sem investimento: R$${h.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,plotarGrafico(i,j)}function plotarGrafico(a,b){const c=document.getElementById("chart").getContext("2d");chart&&chart.destroy(),chart=new Chart(c,{type:"line",data:{labels:a.map((a,b)=>`MÃªs ${b+1}`),datasets:[{label:"Investimento",data:a,borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.2)",fill:!0,tension:.4,pointRadius:0,borderWidth:2},{label:"Guardado sem Investir",data:b,borderColor:"#e74c3c",backgroundColor:"rgba(231, 76, 60, 0.2)",fill:!0,tension:.4,pointRadius:0,borderWidth:2}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Meses",color:"#333",font:{size:14}}},y:{title:{display:!0,text:"Valor (R$)",color:"#333",font:{size:14}}}},plugins:{legend:{labels:{color:"#333"}}}}})}
